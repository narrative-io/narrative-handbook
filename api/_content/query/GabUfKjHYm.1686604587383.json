{"_path":"/playbooks/system-hardening","_dir":"playbooks","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"System Hardening","description":"The purpose of this document is to outline the hardening standards that should be implemented for newly deployed infrastructure. These standards are designed to ensure the security and integrity of our systems and data by mitigating the risks associated with potential security threats.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"system-hardening"},"children":[{"type":"text","value":"System Hardening"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The purpose of this document is to outline the hardening standards that should be implemented for newly deployed infrastructure. These standards are designed to ensure the security and integrity of our systems and data by mitigating the risks associated with potential security threats."}]},{"type":"element","tag":"h2","props":{"id":"system-configuration"},"children":[{"type":"text","value":"System Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All systems should be configured according to the following guidelines:"}]},{"type":"element","tag":"h3","props":{"id":"roles-and-permissions"},"children":[{"type":"text","value":"Roles and Permissions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each deployable system/application/job/service should run using a dedicated IAM role with permissions granting it minimal access to the operations and resources it requires."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Examples:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/open-api/tree/main/infra/modules/iam","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" open-api"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/marketplace/blob/main/marketplace-terraform/modules/marketplace-webapp/iam.tf","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" marketplace"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/narrative-s3-connector/tree/main/infra/modules/iam","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" narrative-s3-connector"}]}]}]},{"type":"element","tag":"h3","props":{"id":"credentials"},"children":[{"type":"text","value":"Credentials"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All secrets, passwords, and tokens that applications need access to must be stored using "},{"type":"element","tag":"a","props":{"href":"https://us-east-1.console.aws.amazon.com/systems-manager/parameters/","rel":["nofollow"]},"children":[{"type":"text","value":"AWS SSM ParamStore"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"https://us-east-1.console.aws.amazon.com/secretsmanager/listsecrets","rel":["nofollow"]},"children":[{"type":"text","value":"AWS Secrets Manager"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"AWS Secrets Manager is the preferred option for database passwords and connection details, given that it provides mechanisms to facilitate "},{"type":"element","tag":"a","props":{"href":"https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotate-secrets_turn-on-for-db.html","rel":["nofollow"]},"children":[{"type":"text","value":"RDS credential rotations"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"SSM can be used for everything else"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Examples:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/open-api/blob/cc33aa640e4e2857f6635295692b33c242e8a06d/config/src/main/scala/io/narrative/api/config/config.scala#L20","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" open-api"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/marketplace/blob/d5ef8917f012625e3e720c2a647e79ba2215d1d7/marketplace-backend/marketplace-api/src/main/scala/io/narrative/marketplace/api/Config.scala#L147","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" marketplace"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/narrative-analytics-warehouse/blob/de5442cd5c0924594674cef4b47011ecaf71f26a/ingestion-staging-lambda/src/main/scala/io/narrative/datashops/ingestion/IngestionStagingLambda.scala#L115","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" ingestion-staging"}]}]}]},{"type":"element","tag":"h3","props":{"id":"ec2-remote-access"},"children":[{"type":"text","value":"EC2 Remote Access"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When creating EC2 instances, remote access through SSH should be disabled and SSM StartSession should be used instead."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Examples:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/marketplace/blob/82ef586a76c292544c12a62354ca8aa5e2a21ef3/marketplace-terraform/modules/marketplace-webapp/asg.tf#L11","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" marketplace: SSH key disabled"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/marketplace/blob/82ef586a76c292544c12a62354ca8aa5e2a21ef3/marketplace-terraform/modules/marketplace-webapp/iam.tf#L124","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" marketplace: SSM Managed Instance Core permissions"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/marketplace/blob/82ef586a76c292544c12a62354ca8aa5e2a21ef3/marketplace-terraform/modules/marketplace-webapp/asg.tf#L19","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" marketplace: AMI compatible with SSM"}]}]}]},{"type":"element","tag":"h2","props":{"id":"network-configuration"},"children":[{"type":"text","value":"Network Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Applications and services should be deployed to the VPC that matches the target environment."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/narrative-network-infra/tree/main/main-vpc-lookup","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" main-vpc-lookup"}]},{"type":"text","value":" can be used to lookup the VPCs, subnet ids, and other network characteristics of the target environment."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Examples:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/narrative-io/open-api/blob/cd4537022a6ca61e0200399f4d31e9808676b40f/infra/prod/main.tf#L99","rel":["nofollow"]},"children":[{"type":"element","tag":"icon","props":{"name":"openmoji:locked"},"children":[]},{"type":"text","value":" open-api"}]}]}]},{"type":"element","tag":"h2","props":{"id":"programming"},"children":[{"type":"text","value":"Programming"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Refer to the "},{"type":"element","tag":"a","props":{"href":"/checklists/system-deployment#security"},"children":[{"type":"text","value":"System Deployment Security Checklists"}]},{"type":"text","value":"."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"system-configuration","depth":2,"text":"System Configuration","children":[{"id":"roles-and-permissions","depth":3,"text":"Roles and Permissions"},{"id":"credentials","depth":3,"text":"Credentials"},{"id":"ec2-remote-access","depth":3,"text":"EC2 Remote Access"}]},{"id":"network-configuration","depth":2,"text":"Network Configuration"},{"id":"programming","depth":2,"text":"Programming"}]}},"_type":"markdown","_id":"content:2.playbooks:system-hardening.md","_source":"content","_file":"2.playbooks/system-hardening.md","_extension":"md"}